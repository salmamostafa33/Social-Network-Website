if (self.CavalryLogger) { CavalryLogger.start_js(["Y4xrE"]); }

__d("XCommentPlaceTypeaheadBootstrapController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/comment_place_typeahead/bootstrap/",{comment_fbid:{type:"String"}})}),null);
__d("XCommentPlaceTypeaheadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/comment_place_typeahead/",{comment_fbid:{type:"String"},place_list_id:{type:"String"},value:{type:"String",defaultValue:""}})}),null);
__d("CommentPlaceTypeahead.react",["cx","fbt","invariant","CurrentUser","React","URI","XCommentPlaceTypeaheadController","XCommentPlaceTypeaheadBootstrapController","XUITypeahead.react","WebAsyncSearchSource","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){"use strict";n.commentID||n.placeListID||j(0);l.constructor.call(this,n);this.$CommentPlaceTypeahead1=this.$CommentPlaceTypeahead2();this.state={query:""}}m.prototype.render=function(){"use strict";var n={focusedOnInit:true,placeholder:i._("Type your recommendation"),showEntriesOnFocus:true,viewStyle:"rich",onEnterWithoutSelection:function o(p){p.preventDefault();p.stopPropagation()}};return c("React").createElement(c("XUITypeahead.react"),babelHelpers["extends"]({},n,this.props,{className:c("joinClasses")(this.props.className,"_4kol"),onChange:function(o){return this.setState({query:o.target.value})}.bind(this),onSelectAttempt:this.props.onSelectPlace,queryString:this.state.query,searchSource:this.$CommentPlaceTypeahead1}))};m.prototype.$CommentPlaceTypeahead2=function(){"use strict";return new(c("WebAsyncSearchSource"))({getAllForEmptyQuery:!this.props.showNoResultsForEmptyQuery,queryRequests:[{uri:c("XCommentPlaceTypeaheadController").getURIBuilder().setString("comment_fbid",this.props.commentID).setString("place_list_id",this.props.placeListID).getURI()}],bootstrapRequests:[{uri:c("XCommentPlaceTypeaheadBootstrapController").getURIBuilder().setString("comment_fbid",this.props.commentID).getURI()}]})};f.exports=m}),null);
__d("PlaceListEventEmitter",["EventEmitter"],(function a(b,c,d,e,f,g){var h=new(c("EventEmitter"))();f.exports=h}),null);
__d("XPlaceListCommentRemoveAddAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/remove_comment_add_attachment/",{comment_id:{type:"String",required:true}})}),null);
__d("PlaceListFancyLinkCommentButton.react",["ix","cx","fbt","Image.react","Layout.react","PlaceListSurvey","React","XAsyncRequest","XPlaceListCommentRemoveAddAttachmentController","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m,n,o=c("Layout.react").Column,p=c("Layout.react").FillColumn;k=babelHelpers.inherits(q,c("React").Component);l=k&&k.prototype;q.prototype.render=function(){return c("React").createElement(c("Layout.react"),{className:"_5ofu",onClick:this.props.onClick},c("React").createElement(o,{className:"_5og0"},c("React").createElement(c("Image.react"),{className:"_5og4",src:h("116987")})),c("React").createElement(p,{className:"_5og5"},c("React").createElement("div",{className:"_5z6p"},c("React").createElement("div",{className:"_5og6"},this.props.isAddingMore?j._("Add more recommendations"):j._("Recommend a Place")),c("React").createElement("div",{className:"_2q1t"},j._("Link to Page"))),c("React").createElement(r,this.props)))};function q(){k.apply(this,arguments)}m=babelHelpers.inherits(r,c("React").Component);n=m&&m.prototype;r.prototype.render=function(){if(this.props.isAddingMore)return null;return c("React").createElement("div",{className:"_4nxw"},c("React").createElement("a",{href:"#",className:"_4nxx",onClick:this.$RemoveLink1.bind(this)}))};r.prototype.$RemoveLink1=function(s){var t=c("XPlaceListCommentRemoveAddAttachmentController").getURIBuilder().setString("comment_id",this.props.commentID).getURI();new(c("XAsyncRequest"))(t).setHandler(function(u){if(u.payload&&u.payload.surveyURI)c("PlaceListSurvey").showSurvey(u.payload.surveyURI)}).setErrorHandler(function(){this.props.onChangeAttachmentPermissions({canViewerAdd:true})}.bind(this)).send();this.props.onChangeAttachmentPermissions({canViewerAdd:false});s.stopPropagation()};function r(){m.apply(this,arguments)}f.exports=q}),null);
__d("PlaceListMapEvents",[],(function a(b,c,d,e,f,g){f.exports={ACTIVE_MAP_PAGE_UPDATE:"PlaceListInteractiveMap/activeMapPageUpdate",COMMENT_ATTACHMENT_HOVER_ON:"PlaceListInteractiveMap/commentAttachmentHoverOn",COMMENT_ATTACHMENT_HOVER_OFF:"PlaceListInteractiveMap/commentAttachmentHoverOff",PLACE_UPDATE:"PlaceListInteractiveMap/placeUpdate",PLACE_REMOVED_FROM_MAP:"PlaceListInteractiveMap/placeRemoved",COMMENT_REMOVED_PLACE:"PlaceListInteractiveMap/commentPlaceRemoved",UPDATE_TO_FEED_STORY_COMMENTS:"AddPlaceToMapComponent/placeAddedToComment"}}),null);
__d("XPlaceListUpdateFeedStoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/placelist/update_feed_story/",{comment_fbid:{type:"String"},dom_id:{type:"String",required:true},post_id:{type:"String"}})}),null);
__d("PlaceListCommentFeedStoryUpdater",["csx","XAsyncRequest","DOM","Parent","XPlaceListUpdateFeedStoryController","ge","getOrCreateDOMID"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={},j={refreshFeedStoryForUFIRootID:function k(l,m,n,o){var p=c("ge")(l);if(!p)return;this.refreshFeedStory(p,m,n,o)},refreshFeedStory:function k(l,m,n,o){var p=this._findTargetNode(l);p&&this._updateNode(p,m,n,o)},registerFeedContext:function k(l,m){var n=this._findTargetWithinTree(l);i[c("getOrCreateDOMID")(n)]=m},_updateNode:function k(l,m,n,o){var p=c("getOrCreateDOMID")(l),q=c("XPlaceListUpdateFeedStoryController").getURIBuilder().setString("comment_fbid",n).setString("post_id",m).setString("dom_id",p).getURI();o=o||i[p];new(c("XAsyncRequest"))(q).setData(o?{feed_context:o}:{}).send()},_findTargetNode:function k(l){var m=c("Parent").bySelector(l,"._5pcr");return this._findTargetWithinTree(m)},_findTargetWithinTree:function k(l){return l?c("DOM").find(l,"._3x-2"):null}};f.exports=j}),null);
__d("PlaceListMapUpdater",["PlaceListCommentFeedStoryUpdater","PlaceListEventEmitter","PlaceListFeedAttachmentMapper","PlaceListMapEvents"],(function a(b,c,d,e,f,g){__p&&__p();f.exports={updateMap:function h(i,j){var k=i.ufiNode,l=i.commentFBID,m=i.feedContext;c("PlaceListCommentFeedStoryUpdater").refreshFeedStory(k,null,l,m);this._broadcastMapUpdate(j)},updateMapForUFIRootID:function h(i,j){var k=i.ufiRootID,l=i.commentFBID,m=i.feedContext;c("PlaceListCommentFeedStoryUpdater").refreshFeedStoryForUFIRootID(k,null,l,m);this._broadcastMapUpdate(j)},updateMapForPostID:function h(i,j){c("PlaceListFeedAttachmentMapper").getFeedStoryDOMIDsForPostID(i).forEach(function(k){return c("PlaceListCommentFeedStoryUpdater").refreshFeedStoryForUFIRootID(k,i)});this._broadcastMapUpdate(j)},_broadcastMapUpdate:function h(i){if(i instanceof Array)i={mapBoundingPoints:null,pins:i};if(!i)return;c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").PLACE_UPDATE,i)}}}),null);
__d("XCommentAddPlaceListItemController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/placelist_comment/add_item/",{comment_fbid:{type:"String",required:true},place_ids:{type:"StringVector",required:true}})}),null);
__d("AddPlaceToMapComponent.react",["cx","fbt","invariant","AsyncRequest","CommentPlaceTypeahead.react","Link.react","PlaceListEventEmitter","PlaceListFancyLinkCommentButton.react","PlaceListMapEvents","PlaceListMapUpdater","QE","React","ReactDOM","XCommentAddPlaceListItemController","XUISpinner.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m,n,o="add";k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(r){l.constructor.call(this,r);this.state={isLoading:false,isShowingTypeahead:false}}p.prototype.render=function(){if(this.state.isLoading)return c("React").createElement("div",{className:"_5jpv"},c("React").createElement(c("XUISpinner.react"),null));else if(this.state.isShowingTypeahead)return c("React").createElement(c("CommentPlaceTypeahead.react"),{className:!this.props.isAddingMore?"_x_w":"",commentID:this.props.commentID,onBlur:function(){return this.setState({isShowingTypeahead:false})}.bind(this),onSelectPlace:function(r){return this.$AddPlaceToMapComponent1(r)}.bind(this),tallInput:true});else return c("React").createElement(q,babelHelpers["extends"]({},this.props,{onClick:function(){return this.setState({isShowingTypeahead:true})}.bind(this)}))};p.prototype.$AddPlaceToMapComponent1=function(r){var s=c("XCommentAddPlaceListItemController").getURIBuilder().setString("comment_fbid",this.props.commentID).setStringVector("place_ids",[r.getUniqueID()]).getURI();new(c("AsyncRequest"))(s).setHandler(function(t){var u=this.$AddPlaceToMapComponent2(t.payload.pagesData,r.getUniqueID());c("PlaceListMapUpdater").updateMap({ufiNode:c("ReactDOM").findDOMNode(this),commentFBID:this.props.commentID},{mapBoundingPoints:t.payload.newMapBounds,pins:u?[u]:[]});this.setState({isLoading:false,isShowingTypeahead:false});c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:this.props.commentID,pagesData:t.payload.pagesData,node:c("ReactDOM").findDOMNode(this)});this.props.onRefreshPlaces(t.payload.pagesData)}.bind(this)).setErrorHandler(function(){return this.setState({isLoading:false})}.bind(this)).send();this.setState({isLoading:true})};p.prototype.$AddPlaceToMapComponent2=function(r,s){var t=r.filter(function(u){return u.pageInfo&&u.pageInfo.id===s});t.length>0||j(0);if(!t[0].pageInfo.location)return null;return{data:{icons:t[0].pageInfo.icons,id:t[0].pageInfo.id,location:t[0].pageInfo.location},operation:o}};m=babelHelpers.inherits(q,c("React").Component);n=m&&m.prototype;q.prototype.render=function(){return this.props.isAddingMore?c("React").createElement(c("Link.react"),{className:"_5jpv",onClick:this.props.onClick},i._("Add More Recommendations")):c("React").createElement(c("PlaceListFancyLinkCommentButton.react"),{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onClick:this.props.onClick})};function q(){m.apply(this,arguments)}f.exports=p}),null);
__d("CurationModeDeps",["CenteredContainer.react","CommentPlaceTypeahead.react","XUIAmbientNUX.react","XUIButton.react","XUIGrayText.react","XUISpinner.react","XUIText.react"],(function a(b,c,d,e,f,g){var h={CenteredContainer:c("CenteredContainer.react"),CommentPlaceTypeahead:c("CommentPlaceTypeahead.react"),XUIAmbientNUX:c("XUIAmbientNUX.react"),XUIButton:c("XUIButton.react"),XUIGrayText:c("XUIGrayText.react"),XUISpinner:c("XUISpinner.react"),XUIText:c("XUIText.react")};f.exports=h}),null);
__d("KeeperPendingButtons.react",["fbt","React","XUIButton.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement("div",{className:this.props.className},c("React").createElement(c("XUIButton.react"),{label:this.props.denyLabel||h._("No"),disabled:this.props.isDisabled,onClick:this.props.onRemove,use:"default"}),c("React").createElement(c("XUIButton.react"),{label:this.props.confirmLabel||h._("Yes, Add Recommendation"),disabled:this.props.isDisabled,onClick:this.props.onAdd,use:"confirm"}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("PlaceListConfirmationDialog.react",["fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),babelHelpers["extends"]({},this.props,{modal:true}),c("React").createElement(c("XUIDialogTitle.react"),null,this.props.title),c("React").createElement(c("XUIDialogBody.react"),null,this.$PlaceListConfirmationDialog1()),c("React").createElement(c("XUIDialogFooter.react"),null,this.$PlaceListConfirmationDialog2(),this.$PlaceListConfirmationDialog3()))};l.prototype.$PlaceListConfirmationDialog1=function(){if(!this.props.shown)return null;return c("React").createElement("div",null,this.props.content)};l.prototype.$PlaceListConfirmationDialog2=function(){return c("React").createElement(c("XUIDialogButton.react"),{onClick:this.props.onCancel,label:this.props.cancelButtonText?this.props.cancelButtonText:h._("Cancel")})};l.prototype.$PlaceListConfirmationDialog3=function(){return c("React").createElement(c("XUIDialogButton.react"),{action:"confirm",use:"confirm",onClick:this.props.onConfirm,label:this.props.confirmButtonText?this.props.confirmButtonText:h._("Confirm"),disabled:this.props.disableConfirmButton})};function l(){i.apply(this,arguments)}l.propTypes=babelHelpers["extends"]({},c("XUIDialog.react").propTypes,{title:k.node.isRequired,content:k.node.isRequired,onCancel:k.func.isRequired,onConfirm:k.func.isRequired,cancelButtonText:k.node,confirmButtonText:k.node,disableConfirmButton:k.bool});l.defaultProps={width:400,disableConfirmButton:false};f.exports=l}),null);
__d("PlaceListLoader.react",["React","XUISpinner.react"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("XUISpinner.react"),null)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("CurationLoggingEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TOGGLED_ON:"curated_rex_toggled_on",TOGGLED_OFF:"curated_rex_toggled_off",TOGGLED_OFF_DUE_TO_POST:"curate_mode_toggled_due_to_other_post"})}),null);
__d("XCurationModeShouldShowNUXController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/curation_mode/nux/",{})}),null);
__d("CurationStateSubscriptionHandler",["CurationLoggingEvents","CurationStateSubscriptionList","XAsyncRequest","XCurationModeShouldShowNUXController"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i={getSubscriptionListForPostID:function j(k){var l=h[k];if(!l)h[k]=new(c("CurationStateSubscriptionList"))(k);return h[k]},toggleAllOffExceptForPostID:function j(k){Object.keys(h).forEach(function(l){if(l!==k)h[l].toggleOff(c("CurationLoggingEvents").TOGGLED_OFF_DUE_TO_POST)})},getSubscriptionListAndMaybeShowNuxForPostID:function j(k,l){var m=Object.keys(h).length===0,n=i.getSubscriptionListForPostID(k);if(m){var o=c("XCurationModeShouldShowNUXController").getURIBuilder().getURI();new(c("XAsyncRequest"))(o).setHandler(function(p){m=p.payload;if(m)l()}).send()}return n}};f.exports=i}),null);
__d("XCurationLoggingEventsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/placelist_comment/log_toggle/",{post_id:{type:"String",required:true},logging_event:{type:"Enum",required:true,enumType:1}})}),null);
__d("CurationStateSubscriptionList",["CurationLoggingEvents","CurationStateSubscriptionHandler","SubscriptionList","XAsyncRequest","XCurationLoggingEventsController"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("SubscriptionList"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.isToggled=false;this.postID=k}j.prototype.add=function(k){"use strict";k(this.isToggled);return i.add.call(this,k)};j.prototype.fireToggle=function(k){"use strict";this.isToggled=!this.isToggled;i.fireCallbacks.call(this,this.isToggled);if(this.isToggled)c("CurationStateSubscriptionHandler").toggleAllOffExceptForPostID(this.postID);if(!k)k=this.isToggled?c("CurationLoggingEvents").TOGGLED_ON:c("CurationLoggingEvents").TOGGLED_OFF;var l=c("XCurationLoggingEventsController").getURIBuilder().setEnum("logging_event",k).setString("post_id",this.postID).getURI();new(c("XAsyncRequest"))(l).send()};j.prototype.toggleOff=function(k){"use strict";if(this.isToggled)this.fireToggle(k)};j.prototype.toggleOn=function(){"use strict";if(!this.isTogged)this.fireToggle()};f.exports=j}),null);
__d("PlaceListMapState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:1,PENDING:2,REMOVABLE:3,REMOVED:4,SUGGESTED:5})}),null);
__d("XPlaceListCommentRemoveRecController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/remove_rec/",{comment_fbid:{type:"FBID",required:true},is_spotlight:{type:"Bool",defaultValue:false},map_state:{type:"Enum",required:true,enumType:0},rec_id:{type:"FBID",required:true},rec_type:{type:"Enum",required:true,enumType:1}})}),null);
__d("PlacePageRemoveLink.react",["csx","cx","fbt","invariant","Parent","PlaceListConfirmationDialog.react","PlaceListEventEmitter","PlaceListMapEvents","PlaceListMapState","React","ReactDOM","SubscriptionsHandler","XAsyncRequest","XPlaceListCommentRemoveRecController"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m;l=babelHelpers.inherits(n,c("React").Component);m=l&&l.prototype;function n(o){"use strict";m.constructor.call(this,o);this.state={isConfirmDialogShown:false};this.$PlacePageRemoveLink1=new(c("SubscriptionsHandler"))()}n.prototype.componentDidMount=function(){"use strict";this.$PlacePageRemoveLink1.addSubscriptions(c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").PLACE_REMOVED_FROM_MAP,function(o){if(o.placeID===this.props.recID&&o.postID===this.props.mapContext.postID)this.$PlacePageRemoveLink2()}.bind(this)));this.$PlacePageRemoveLink1.addSubscriptions(c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").COMMENT_REMOVED_PLACE,function(o){if(o.placeID===this.props.recID&&o.commentID===this.props.mapContext.commentID)this.$PlacePageRemoveLink2()}.bind(this)))};n.prototype.componentWillUnmount=function(){"use strict";this.$PlacePageRemoveLink1.release()};n.prototype.render=function(){"use strict";__p&&__p();var o=null,p=c("React").createElement("a",{href:"#",ref:"button",className:"_35g7",onClick:function(){return this.$PlacePageRemoveLink3()}.bind(this)});if(this.state.isConfirmDialogShown)o=c("React").createElement(c("PlaceListConfirmationDialog.react"),{causalElementRef:function(){return this.refs.button}.bind(this),shown:true,onToggle:function(){return this.$PlacePageRemoveLink4()}.bind(this),width:400,title:j._("Delete Recommendation"),content:c("React").createElement("div",null,j._("Deleting this recommendation will remove it from the comment and the map. Are you sure want to do this?")),onCancel:function(){return this.$PlacePageRemoveLink4()}.bind(this),onConfirm:function(){return this.$PlacePageRemoveLink5()}.bind(this),cancelButtonText:j._("Cancel"),confirmButtonText:j._("Delete")});return c("React").createElement("div",null,p,o)};n.prototype.$PlacePageRemoveLink2=function(){"use strict";this.props.onChangePlaceState!=null||k(0);this.props.onChangePlaceState(this.props.recID,c("PlaceListMapState").REMOVED,null)};n.prototype.$PlacePageRemoveLink5=function(){"use strict";this.$PlacePageRemoveLink4();this.$PlacePageRemoveLink6()};n.prototype.$PlacePageRemoveLink4=function(){"use strict";this.setState({isConfirmDialogShown:false})};n.prototype.$PlacePageRemoveLink7=function(){"use strict";var o=c("ReactDOM").findDOMNode(this);if(!o)return false;return c("Parent").bySelector(o,"._23ce")!==null};n.prototype.$PlacePageRemoveLink6=function(){"use strict";__p&&__p();if(!this.props.recID||!this.props.mapContext.commentID)return;if(this.props.onChangeBusyState)this.props.onChangeBusyState(true);var o=c("XPlaceListCommentRemoveRecController").getURIBuilder().setFBID("comment_fbid",this.props.mapContext.commentID).setBool("is_spotlight",this.$PlacePageRemoveLink7()).setEnum("map_state",this.props.mapContext.mapState).setFBID("rec_id",this.props.recID).setEnum("rec_type",this.props.recType).getURI();new(c("XAsyncRequest"))(o).setHandler(function(){if(this.props.onChangeBusyState)this.props.onChangeBusyState(false);c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").COMMENT_REMOVED_PLACE,{placeID:this.props.recID,postID:this.props.mapContext.postID,commentID:this.props.mapContext.commentID})}.bind(this)).setErrorHandler(function(){if(this.props.onChangeBusyState)this.props.onChangeBusyState(false)}.bind(this)).send()};n.prototype.$PlacePageRemoveLink3=function(){"use strict";var o=this.props.mapContext.mapState===c("PlaceListMapState").PENDING||this.props.mapContext.mapState===c("PlaceListMapState").SUGGESTED;if(o)this.$PlacePageRemoveLink5();else this.setState({isConfirmDialogShown:true})};f.exports=n}),null);
__d("PlaceListInfoCardHeader.react",["cx","Layout.react","PlaceListMapState","PlacePageRemoveLink.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("Layout.react").Column,j=c("Layout.react").FillColumn,k=function k(l){__p&&__p();if(l.mapContext==null)return null;var m=void 0;switch(l.mapContext.mapState){case c("PlaceListMapState").PENDING:case c("PlaceListMapState").SUGGESTED:m=l.headerLabel;break;case c("PlaceListMapState").REMOVABLE:case c("PlaceListMapState").NORMAL:return null}var n=null;if(l.canViewerRemove&&l.removablePlaceID&&l.recType)n=c("React").createElement(c("PlacePageRemoveLink.react"),{mapContext:l.mapContext,onChangeBusyState:l.onChangeBusyState,onChangePlaceState:l.onChangePlaceState,recID:l.removablePlaceID,recType:l.recType});return c("React").createElement(c("Layout.react"),{className:"_2phz _22k8"},c("React").createElement(j,{className:"_22kb"},m),c("React").createElement(i,null,n))};f.exports=k}),null);
__d("ProfileCardInfoGlyph",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CITY:"city",NETWORK:"network",OTHER:"other",SCHOOL:"school",WORK:"work"})}),null);
__d("PlaceListProfileInfoCard.react",["ix","cx","Image.react","ImageBlock.react","PlacePageInfoCard.react","ProfileCardInfoGlyph","React","URI","fbglyph","sprintf"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=60;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){"use strict";var p=this.props.profileInfo,q=p.bio,r=p.id,s=p.name,t=p.cityString,u=p.socialContext;return c("React").createElement("div",{className:this.props.className},c("React").createElement(c("ImageBlock.react"),{spacing:"medium"},c("React").createElement("a",{href:"/"+r},c("React").createElement(c("Image.react"),{src:c("sprintf")("https://graph.facebook.com/%s/picture?width=%s&height=%s",r,l,l)})),c("React").createElement("div",{className:"_3-8w _e4i",style:{minHeight:this.props.profilePicSize}},c("React").createElement("div",{className:"_3zac"},c("React").createElement("a",{"data-hovercard":new(c("URI"))("/ajax/hovercard/user.php").setQueryData({id:r}),href:"/"+r},s),c("React").createElement("div",{className:"_3zad"},q.text?c("React").createElement(n,q):null,t?c("React").createElement(n,{icon:"city",text:t}):null,q.text&&t?null:c("React").createElement("div",{className:"_3zae"},u))))))};function m(){"use strict";j.apply(this,arguments)}m.defaultProps={profilePicSize:l};var n=function n(p){return c("React").createElement("div",null,c("React").createElement(c("Image.react"),{className:"_3zaf",src:o(p.icon)}),p.text)};function o(p){switch(p){case c("ProfileCardInfoGlyph").CITY:return h("122630");case c("ProfileCardInfoGlyph").NETWORK:return h("123290");case c("ProfileCardInfoGlyph").SCHOOL:return h("122834");case c("ProfileCardInfoGlyph").WORK:return h("122471");case c("ProfileCardInfoGlyph").OTHER:default:return h("123136")}}f.exports=m}),null);
__d("PlaceListAnimation",["cssVar","Animation"],(function a(b,c,d,e,f,g,h){f.exports={glow:function i(j){new(c("Animation"))(j).from("background","#fffbe2").to("background","#e9ebee").duration(2e3).go().ondone(function(){return j.style.removeProperty("background")})}}}),null);
__d("PlaceListRecType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PLACE:"place",PROFILE:"profile"})}),null);
__d("XPlaceListCommentConfirmPendingRecController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/confirm_pending_recs/",{comment_fbid:{type:"FBID",required:true},rec_id:{type:"FBID",required:true},rec_type:{type:"Enum",required:true,enumType:1}})}),null);
__d("PlaceListCommentPendingRecButtons.react",["fbt","KeeperPendingButtons.react","PlaceListEventEmitter","PlaceListMapEvents","PlaceListMapState","PlaceListRecType","PlaceListSurvey","React","ReactDOM","Set","XAsyncRequest","XPlaceListCommentConfirmPendingRecController","XPlaceListCommentRemoveRecController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this,l);this.$PlaceListCommentPendingRecButtons1=function(){var m=c("XPlaceListCommentConfirmPendingRecController").getURIBuilder().setFBID("comment_fbid",this.props.commentID).setFBID("rec_id",this.props.recID).setEnum("rec_type",this.props.recType).getURI();this.$PlaceListCommentPendingRecButtons3(m,c("PlaceListMapState").NORMAL)}.bind(this);this.$PlaceListCommentPendingRecButtons2=function(){var m=c("XPlaceListCommentRemoveRecController").getURIBuilder().setFBID("comment_fbid",this.props.commentID).setEnum("map_state",this.props.mapState?this.props.mapState:c("PlaceListMapState").PENDING).setFBID("rec_id",this.props.recID).setEnum("rec_type",this.props.recType).getURI();this.$PlaceListCommentPendingRecButtons3(m,c("PlaceListMapState").REMOVED)}.bind(this);this.state={isCommittingUpdate:false}}k.prototype.render=function(){"use strict";var l=this.props.mapState==c("PlaceListMapState").SUGGESTED?h._("Add"):undefined,m=this.props.mapState==c("PlaceListMapState").SUGGESTED?h._("Wrong Place"):undefined;return c("React").createElement(c("KeeperPendingButtons.react"),{className:this.props.className,confirmLabel:l,denyLabel:m,isDisabled:this.state.isCommittingUpdate,onAdd:this.$PlaceListCommentPendingRecButtons1,onRemove:this.$PlaceListCommentPendingRecButtons2})};k.prototype.$PlaceListCommentPendingRecButtons3=function(l,m){"use strict";__p&&__p();this.setState({isCommittingUpdate:true});var n=c("ReactDOM").findDOMNode(this),o=this.props.recID;new(c("XAsyncRequest"))(l).setHandler(function(p){this.setState({isCommittingUpdate:false});var q=this.props.onChangePlaceState&&this.props.onChangePlaceState(this.props.recID,m,(p.payload||{}).newMapBounds);if(m===c("PlaceListMapState").REMOVED)c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").COMMENT_REMOVED_PLACE,{placeID:o,commentID:this.props.commentID});else c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:this.props.commentID,pagesData:q,node:n});if(p.payload&&p.payload.surveyURI)c("PlaceListSurvey").showSurvey(p.payload.surveyURI)}.bind(this)).setErrorHandler(function(){this.setState({isCommittingUpdate:false})}.bind(this)).send()};f.exports=k}),null);
__d("PlaceListInfoCardInteractiveWrapper.react",["cx","PlaceListCommentPendingRecButtons.react","PlaceListInfoCardHeader.react","PlaceListMapState","PlacePageRemoveLink.react","React","SutroPhase2GatingConfig"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var n=null,o=this.props.attachmentPermissions,p=o?o.canViewerRemove:false,q=o?o.canViewerCurate&&this.props.mapContext&&this.props.mapContext.mapState==c("PlaceListMapState").SUGGESTED:false,r=q||p;if(this.props.showHeader)n=c("React").createElement(c("PlaceListInfoCardHeader.react"),{canViewerRemove:r,headerLabel:this.props.headerLabel,mapContext:this.props.mapContext,numPlaces:1,onChangeBusyState:this.props.onChangeBusyState,onChangePlaceState:this.props.onChangePlaceState,recType:this.props.recType,removablePlaceID:this.props.recID});var s=null;if(o&&o.canViewerAdd)s=c("React").createElement(l,{mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:this.props.recID,recType:this.props.recType});return c("React").createElement("div",null,n,c("React").createElement("div",{className:!c("SutroPhase2GatingConfig").enabled_bubble_comments?"_2phz":""},c("React").Children.only(this.props.children),c("React").createElement(m,{canViewerRemove:r,disableHeader:!this.props.showHeader,mapContext:this.props.mapContext,onChangeBusyState:this.props.onChangeBusyState,onChangePlaceState:this.props.onChangePlaceState,recID:this.props.recID,recType:this.props.recType})),s)};function k(){"use strict";i.apply(this,arguments)}var l=function l(n){var o=n.mapContext;if(!o||o.mapState!==c("PlaceListMapState").PENDING&&o.mapState!==c("PlaceListMapState").SUGGESTED)return null;return c("React").createElement("div",{className:"_d_y clearfix"},c("React").createElement(c("PlaceListCommentPendingRecButtons.react"),{className:"_2q-1",commentID:o.commentID,mapState:o.mapState,onChangePlaceState:n.onChangePlaceState,recID:n.recID,recType:n.recType}))},m=function m(n){if(!n.mapContext||!n.disableHeader||!n.canViewerRemove)return null;return c("React").createElement("div",{className:"_4yjl"},c("React").createElement(c("PlacePageRemoveLink.react"),{mapContext:n.mapContext,onChangeBusyState:n.onChangeBusyState,onChangePlaceState:n.onChangePlaceState,recID:n.recID,recType:n.recType}))};f.exports=k}),null);
__d("HovercardControllerType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ARTICLE_AUTHOR_IN_SHARED_LINK:"article_author_in_shared_link",CHAT:"chat",CMS:"cms",COMMUNITY:"community",EGO:"ego",ELECTION_RESULT_MODULE:"election_result_module",FRIEND_WANT_VIDEO:"friend_want_video",GROUP_FORSALE:"group_forsale",GROUP_FORSALE_RECOMMENDATION:"group_forsale_recommendation",GROUP_MEMBER:"groupmember",HELP_COMMUNITY_USER:"help_community_user",MEDIA_TAG:"mediatag",PAGE_ADMIN:"page_admin",PAGE_CONTEXT_CARD:"page_context_card",PLACE_LIST_INTERACTIVE_MAP:"place_list_interactive_map",TIMELINE_UNIT:"timeline_unit",VIDEO_THUMBNAIL:"video_thumbnail",WITH_TAG:"withtag"})}),null);
__d("RexFacepileRounded.react",["FacepileRounded.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("FacepileRounded.react"),{imageSize:this.props.imageSize,numProfilesToDisplay:this.props.numProfilesToDisplay,profiles:this.props.profiles,showNames:this.props.showNames})};function j(){h.apply(this,arguments)}j.defaultProps={direction:"ascending",imageSize:32,showNames:false,isClickable:false,showHovercards:false};f.exports=j}),null);
__d("PlacePageReadOnlyInfoCard.react",["ix","cx","AbstractActionList.react","DOM","DOMContainer.react","HovercardControllerType","HovercardLinkParams","Image.react","ImageBlock.react","LocalContentConsumptionElement","LocalContentConsumptionEvent","LocalContentConsumptionSurface","React","ReviewConsumptionTypedLogger","RexFacepileRounded.react","asset"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=60,m=320;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.componentDidMount=function(){"use strict";var t=this.props.pageInfo.rating;if(t)this.$PlacePageReadOnlyInfoCard1()};n.prototype.render=function(){"use strict";var t=this.props.pageInfo,u=babelHelpers["extends"]({},t),v=u.rating,w=u.priceRange,x=c("React").createElement("div",{className:"_2pic _5_ts",style:{minHeight:this.props.profilePicSize}},c("React").createElement(o,{commentID:this.props.commentIDForHover,link:t.link,name:t.name,pageID:t.id}),c("React").createElement(c("AbstractActionList.react"),{className:"_r-f"},v&&v>0?c("React").createElement(p,{rating:v}):null,w&&c("React").createElement(q,{priceRange:w}),c("React").createElement("span",null,t.category)),t.rexSocialContext?c("React").createElement(s,{friendRecommenders:t.friendRecommenders,rexSocialContext:t.rexSocialContext}):c("React").createElement(r,{address:t.address}),this.props.extraLines);if(window.innerWidth>m)return c("React").createElement(c("ImageBlock.react"),babelHelpers["extends"]({spacing:"medium"},this.props),c("React").createElement("a",{className:"_5_tt",href:t.link},c("React").createElement(c("Image.react"),{height:this.props.profilePicSize,src:t.profilePic,width:this.props.profilePicSize})),x);else return c("React").createElement("div",this.props,x)};n.prototype.$PlacePageReadOnlyInfoCard1=function(){"use strict";new(c("ReviewConsumptionTypedLogger"))().setPageID(this.props.pageInfo.id).setEvent(c("LocalContentConsumptionEvent").RATING_IMPRESSION).setSurface(c("LocalContentConsumptionSurface").SOCIAL_REX).setElement(c("LocalContentConsumptionElement").TOTAL_RATING).log()};function n(){"use strict";j.apply(this,arguments)}n.defaultProps={profilePicSize:l};var o=function o(t){var u=t.commentID?c("HovercardLinkParams").getHovercardParams(t.pageID,{placelist_comment_id:t.commentID},{type:c("HovercardControllerType").PLACE_LIST_INTERACTIVE_MAP}):c("HovercardLinkParams").getHovercardParams(t.pageID);return c("React").createElement("a",babelHelpers["extends"]({className:"_r-g",href:t.link},u),t.name)},p=function p(t){return c("React").createElement("span",{className:"_r-j"},t.rating," \u2605")},q=function q(t){var u=t.priceRange;if(typeof u==typeof {}&&u.markup)u=u.markup;if(typeof u==typeof {}&&u.__html)u=c("DOM").create("span",{},u);return typeof u==typeof ""?c("React").createElement("span",null,u):c("React").createElement(c("DOMContainer.react"),null,u)},r=function r(t){return t.address?c("React").createElement("div",{className:"_r-k"},t.address):null},s=function s(t){var u=t.friendRecommenders&&t.friendRecommenders.length>0?c("React").createElement(c("RexFacepileRounded.react"),{imageSize:16,numProfilesToDisplay:3,profiles:t.friendRecommenders,showNames:true}):c("React").createElement("div",null,c("React").createElement(c("Image.react"),{src:h("381264")}));return c("React").createElement("div",{className:"_182n"},c("React").createElement("div",{className:"_182o"},u),c("React").createElement("span",{className:"_182q"},c("React").createElement(c("DOMContainer.react"),null,c("DOM").create("span",{},t.rexSocialContext))))};f.exports=n}),null);
__d("PlacePageInfoCard.react",["ix","csx","cx","fbt","Image.react","Parent","PlaceListAnimation","PlaceListEventEmitter","PlaceListInfoCardInteractiveWrapper.react","PlaceListLoader.react","PlaceListMapEvents","PlaceListProfileInfoCard.react","PlaceListRecType","PlacePageReadOnlyInfoCard.react","React","ReactDOM","SubscriptionsHandler","fbglyph","joinClasses","nullthrows"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n,o,p,q,r,s,t,u,v,w;l=babelHelpers.inherits(x,c("React").Component);m=l&&l.prototype;x.prototype.render=function(){"use strict";__p&&__p();if(this.props.pageInfo)return c("React").createElement(C,this.props);else if(this.props.userCreatedRecInfo)return c("React").createElement(y,this.props);else if(this.props.profileInfo)return c("React").createElement(B,this.props);else if(this.props.suggestedRecInfo)return c("React").createElement(A,this.props);return null};function x(){"use strict";l.apply(this,arguments)}n=babelHelpers.inherits(y,c("React").Component);o=n&&n.prototype;y.prototype.render=function(){"use strict";var D=c("nullthrows")(this.props.userCreatedRecInfo),E=D.address,F=D.name,G=D.phoneNumber,H=D.shimmedWebsiteURI,I=D.websiteURI,J=["_2wtp","_2wtq"],K=[G,E].map(function(M,N){return M?c("React").createElement("div",{key:N,className:J[N]},M):null}),L=c("joinClasses")(this.props.className,"_4yjk _2phz");return c("React").createElement("div",{className:L},c("React").createElement("div",{className:"_5s5y"},F),K,c("React").createElement("a",{href:H},I))};function y(){"use strict";n.apply(this,arguments)}p=babelHelpers.inherits(z,c("React").Component);q=p&&p.prototype;z.prototype.render=function(){"use strict";var D=this.props.suggestedRecInfo,E=D.suggestorName,F=c("React").createElement(c("Image.react"),{src:h("117157"),className:"_61se"});if(this.props.attachmentPermissions&&this.props.attachmentPermissions.canViewerAdd)return c("React").createElement("div",null,c("React").createElement("div",{className:"_61sd"},k._("{sugegstorName}",[k.param("sugegstorName",E)]),F),k._({"*":"suggested you add these links","_1":"suggested you add this link"},[k.plural(D.numSuggestedBySuggestor)]));else return D.isViewerSuggestor?c("React").createElement("div",null,k._("Suggested by {=You}",[k.param("=You",c("React").createElement("div",{className:"_61sd"},k._("You")))]),F):c("React").createElement("div",null,k._("Suggested by {=[sugegstorName]}",[k.param("=[sugegstorName]",c("React").createElement("div",{className:"_61sd"},k._("{sugegstorName}",[k.param("sugegstorName",E)])))]),F)};function z(){"use strict";p.apply(this,arguments)}r=babelHelpers.inherits(A,c("React").Component);s=r&&r.prototype;function A(D){"use strict";s.constructor.call(this,D)}A.prototype.render=function(){"use strict";if(!this.props.suggestedRecInfo)return null;var D=!this.props.disableHeader?c("React").createElement(z,{suggestedRecInfo:this.props.suggestedRecInfo,attachmentPermissions:this.props.attachmentPermissions?this.props.attachmentPermissions:undefined}):undefined;return c("React").createElement(C,{attachmentPermissions:this.props.attachmentPermissions,className:this.props.className,disableHeader:this.props.disableHeader,mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,pageInfo:this.props.suggestedRecInfo.pageInfo,headerLabel:D})};t=babelHelpers.inherits(B,c("React").Component);u=t&&t.prototype;B.prototype.render=function(){"use strict";var D=this.props.attachmentPermissions,E=c("joinClasses")(this.props.className,"_4yjk");return c("React").createElement("div",{className:E},c("React").createElement(c("PlaceListInfoCardInteractiveWrapper.react"),{attachmentPermissions:D?D:undefined,headerLabel:k._("Are you recommending..."),mapContext:this.props.mapContext,onChangePlaceState:this.props.onChangePlaceState,recID:c("nullthrows")(this.props.profileInfo).id,recType:c("PlaceListRecType").PROFILE,showHeader:!this.props.disableHeader&&Boolean(this.props.mapContext)},c("React").createElement(c("PlaceListProfileInfoCard.react"),{profileInfo:c("nullthrows")(this.props.profileInfo)})))};function B(){"use strict";t.apply(this,arguments)}v=babelHelpers.inherits(C,c("React").Component);w=v&&v.prototype;function C(D){"use strict";w.constructor.call(this,D);this.$PageCard1=new(c("SubscriptionsHandler"))();this.state={activePage:false,isBusy:false}}C.prototype.componentDidMount=function(){"use strict";if(this.$PageCard2())this.$PageCard1.addSubscriptions(c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").ACTIVE_MAP_PAGE_UPDATE,function(D){this.setState({activePage:D.placeID==this.$PageCard3()});if(D.highlight&&D.placeID==this.$PageCard3())c("PlaceListAnimation").glow(c("ReactDOM").findDOMNode(this))}.bind(this)),c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").COMMENT_ATTACHMENT_HOVER_ON,function(D){this.setState({activePage:D.placeID==this.$PageCard3()})}.bind(this)),c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").COMMENT_ATTACHMENT_HOVER_OFF,function(){return this.setState({activePage:false})}.bind(this)))};C.prototype.componentWillUnmount=function(){"use strict";this.$PageCard1&&this.$PageCard1.release()};C.prototype.render=function(){"use strict";var D=this.$PageCard3(),E=this.props.attachmentPermissions,F=c("joinClasses")(this.props.className,"_4yjk"+(this.state.activePage?" _3xgf":"")),G=this.props.mapContext?this.props.mapContext.commentID:null,H=this.props.headerLabel?this.props.headerLabel:k._("Did you mean...");if(this.state.isBusy)return c("React").createElement("div",{className:F},c("React").createElement("div",{className:"_2phz",style:{height:"60px",textAlign:"center"}},c("React").createElement("div",{className:"_3-8-"},c("React").createElement(c("PlaceListLoader.react"),null))));return c("React").createElement("div",{className:F,onMouseEnter:function(){return this.$PageCard4(D)}.bind(this),onMouseLeave:function(){return this.$PageCard5()}.bind(this)},c("React").createElement(c("PlaceListInfoCardInteractiveWrapper.react"),{attachmentPermissions:E?E:undefined,headerLabel:H,mapContext:this.props.mapContext,onChangeBusyState:function(I){return this.$PageCard6(I)}.bind(this),onChangePlaceState:this.props.onChangePlaceState,recID:D,recType:c("PlaceListRecType").PLACE,showHeader:!this.props.disableHeader&&Boolean(this.props.mapContext)},c("React").createElement(c("PlacePageReadOnlyInfoCard.react"),{commentIDForHover:G,pageInfo:c("nullthrows")(this.props.pageInfo)})))};C.prototype.$PageCard3=function(){"use strict";return c("nullthrows")(this.props.pageInfo).id};C.prototype.$PageCard6=function(D){"use strict";this.setState({isBusy:D})};C.prototype.$PageCard2=function(){"use strict";var D=c("ReactDOM").findDOMNode(this);if(!D)return false;return c("Parent").bySelector(D,"._23ce")!==null};C.prototype.$PageCard4=function(D){"use strict";setTimeout(function(){return c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").COMMENT_ATTACHMENT_HOVER_ON,{placeID:D})},0)};C.prototype.$PageCard5=function(){"use strict";c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").COMMENT_ATTACHMENT_HOVER_OFF)};f.exports=x}),null);
__d("PlacePageInfoAggregation.react",["cx","fbt","AddPlaceToMapComponent.react","CurationStateSubscriptionHandler","CurationStateSubscriptionList","PlaceListEventEmitter","PlaceListInfoCardHeader.react","PlaceListMapEvents","PlaceListMapState","PlacePageInfoCard.react","React","ReactDOM","ShimButton.react","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l,m,n=3;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;o.prototype.render=function(){"use strict";return c("React").createElement("div",this.props,this.props.pageSections.map(function(r){return this.$PlacePageInfoAggregation1(r)}.bind(this)))};o.prototype.$PlacePageInfoAggregation1=function(r){"use strict";if(r.length===0)return null;var s=r[0].mapContext?r[0].mapContext.mapState:c("PlaceListMapState").NORMAL;return c("React").createElement(p,{attachmentPermissions:this.props.attachmentPermissions,key:"mapstate_"+s,mapState:s,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onChangePlaceState:this.props.onChangePlaceState,onRefreshPlaces:this.props.onRefreshPlaces,pagesData:r,postID:this.props.postID})};function o(){"use strict";j.apply(this,arguments)}l=babelHelpers.inherits(p,c("React").Component);m=l&&l.prototype;function p(r){"use strict";m.constructor.call(this,r);this.$MultiPlaceSection4=function(t){this.setState({isVisibleToViewer:t})}.bind(this);this.$MultiPlaceSection3=new(c("SubscriptionsHandler"))();var s=this.props.mapState===c("PlaceListMapState").SUGGESTED&&this.props.attachmentPermissions&&this.props.attachmentPermissions.canViewerCurate;this.$MultiPlaceSection1=this.props.postID&&s?new(c("CurationStateSubscriptionHandler").getSubscriptionListForPostID)(this.props.postID):null;this.state={isShowingAll:false,isVisibleToViewer:!s}}p.prototype.componentDidMount=function(){"use strict";__p&&__p();if(!this.state.isVisibleToViewer&&this.$MultiPlaceSection1)this.$MultiPlaceSection2=this.$MultiPlaceSection1.add(this.$MultiPlaceSection4);this.$MultiPlaceSection3.addSubscriptions(c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,function(r){if(this.props.pagesData[0].mapContext&&r.commentFBID===this.props.pagesData[0].mapContext.commentID){var s=c("ReactDOM").findDOMNode(this),t=r.node;if(s&&s.contains(t))this.setState({isShowingAll:true});this.props.onRefreshPlaces(r.pagesData)}}.bind(this)))};p.prototype.componentWillUnmount=function(){"use strict";this.$MultiPlaceSection3.release();this.$MultiPlaceSection2&&this.$MultiPlaceSection2.remove()};p.prototype.render=function(){"use strict";__p&&__p();if(!this.state.isVisibleToViewer)return null;var r=this.props.pagesData,s=this.props.pagesData[0].mapContext,t=this.props.mapState===c("PlaceListMapState").PENDING,u=this.props.attachmentPermissions,v=null,w=this.props.mapState!==c("PlaceListMapState").PENDING&&this.props.mapState!==c("PlaceListMapState").SUGGESTED,x=u?u.canViewerCurate&&this.props.mapState==c("PlaceListMapState").SUGGESTED:false;if(r.length>1&&t)v=c("React").createElement(c("PlaceListInfoCardHeader.react"),{canViewerRemove:u?u.canViewerRemove||x:false,headerLabel:i._("Did you mean..."),mapContext:s,numPlaces:r.length,onChangePlaceState:this.props.onChangePlaceState});var y=null;if(r.length>n&&!this.state.isShowingAll){r=r.slice(0,n);y=c("React").createElement(q,{onClick:function(){return this.setState({isShowingAll:true})}.bind(this)})}else if(u&&u.canViewerAdd&&w&&s!=null)y=c("React").createElement(c("AddPlaceToMapComponent.react"),{commentID:s.commentID,isAddingMore:true,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onRefreshPlaces:this.$MultiPlaceSection5.bind(this)});var z=this.props.mapState===c("PlaceListMapState").SUGGESTED?this.$MultiPlaceSection6(r):r.map(function(A){return{pageData:A,disableHeader:v!==null||!t}});return c("React").createElement("div",{className:"_3-e2"},v,z.map(function(A,B){return c("React").createElement(c("PlacePageInfoCard.react"),babelHelpers["extends"]({},A.pageData,{attachmentPermissions:this.props.attachmentPermissions,disableHeader:A.disableHeader,key:B,onChangePlaceState:this.props.onChangePlaceState}))}.bind(this)),y)};p.prototype.$MultiPlaceSection6=function(r){"use strict";__p&&__p();var s=r.map(function(u){return u.suggestedRecInfo?{pageData:u,suggesterName:u.suggestedRecInfo.suggestorName}:null}),t=s.reduce(function(u,v){if(!v)return u;if(v.suggesterName&&v.suggesterName in u)u[v.suggesterName].push({pageData:v.pageData,disableHeader:true});else u[v.suggesterName]=[{pageData:v.pageData,disableHeader:false}];return u},{});return Object.keys(t).map(function(u){return t[u]}).reduce(function(u,v){return u.concat(v)},[])};p.prototype.$MultiPlaceSection5=function(r){"use strict";if(r.length>=n)this.setState({isShowingAll:true});this.props.onRefreshPlaces(r)};var q=function q(r){return c("React").createElement(c("ShimButton.react"),{className:"_3-e7",form:"link",onClick:r.onClick},i._("See All Recommendations"))};f.exports=o}),null);
__d("PlaceListInteractiveMapOperation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD:"add",REMOVE:"remove"})}),null);
__d("CurationModes",[],(function a(b,c,d,e,f,g){f.exports={ADD_PLACE:"add_place",NONE:"none",UNKNOWN:"unknown"}}),null);
__d("XCommentAddSuggestedPlaceController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/placelist_comment/add_suggested_place/",{comment_fbid:{type:"String",required:true},place_id:{type:"String",required:true}})}),null);
__d("SuggestRecommendationToComment.react",["cx","fbt","CurationModeDeps","PlaceListEventEmitter","PlaceListMapEvents","React","ReactDOM","XAsyncRequest","XCommentAddSuggestedPlaceController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("CurationModeDeps").CommentPlaceTypeahead,m=c("CurationModeDeps").XUISpinner;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={isLoading:false}}n.prototype.render=function(){if(this.state.isLoading)return c("React").createElement("div",{className:"_2zea"},c("React").createElement(m,null));else return c("React").createElement(l,{commentID:this.props.commentID,onBlur:function(){return this.props.onBlur()}.bind(this),onSelectPlace:function(o){return this.$SuggestRecommendationToComment1(o)}.bind(this),placeholder:i._("Type your suggestion"),showNoResultsForEmptyQuery:true,tallInput:true})};n.prototype.$SuggestRecommendationToComment1=function(o){var p=c("XCommentAddSuggestedPlaceController").getURIBuilder().setString("comment_fbid",this.props.commentID).setString("place_id",o.getUniqueID()).getURI(),q=c("ReactDOM").findDOMNode(this);new(c("XAsyncRequest"))(p).setHandler(function(r){this.setState({isLoading:false});this.props.onRefreshPlaces(r.payload.pagesData);this.props.onBlur();c("PlaceListEventEmitter").emit(c("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:this.props.commentID,pagesData:r.payload.pagesData,node:q})}.bind(this)).setErrorHandler(function(){return this.setState({isLoading:false})}.bind(this)).send();this.setState({isLoading:true})};f.exports=n}),null);
__d("XPlaceListCommentNoMorePlacesMarkedController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/place_list/no_more_places_marked/",{comment_id:{type:"String",required:true}})}),null);
__d("CurateCommentPlaceInfo.react",["cx","fbt","CurationModeDeps","CurationModes","CurationStateSubscriptionHandler","CurationStateSubscriptionList","KeeperPendingButtons.react","Layout.react","React","SuggestRecommendationToComment.react","XAsyncRequest","XPlaceListCommentNoMorePlacesMarkedController"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l,m,n,o,p=c("CurationModeDeps").CenteredContainer,q=c("CurationModeDeps").XUIButton,r=c("Layout.react").FillColumn;j=babelHelpers.inherits(s,c("React").Component);k=j&&j.prototype;function s(v){"use strict";k.constructor.call(this,v)}s.prototype.onAdd=function(v){"use strict";if(v){v.preventDefault();this.props.onAdd()}};s.prototype.render=function(){"use strict";var v=i._("Link to Page"),w=this.props.isAddingMore?i._("No More Places"):i._("No");return c("React").createElement("div",{className:"_d_y _3-8x clearfix"},c("React").createElement(c("KeeperPendingButtons.react"),{className:"_2q-1",confirmLabel:v,denyLabel:w,onAdd:this.onAdd.bind(this),isDisabled:false,onRemove:this.$CurateCommentPlaceInfoButtons1.bind(this)}))};s.prototype.$CurateCommentPlaceInfoButtons1=function(v){"use strict";if(v){v.preventDefault();var w=c("XPlaceListCommentNoMorePlacesMarkedController").getURIBuilder().setString("comment_id",this.props.commentID).getURI();new(c("XAsyncRequest"))(w).setErrorHandler(function(){this.props.onChangeAttachmentPermissions({canViewerAddSuggested:true})}.bind(this)).send();this.props.onChangeAttachmentPermissions({canViewerAddSuggested:false});v.stopPropagation()}};l=babelHelpers.inherits(t,c("React").Component);m=l&&l.prototype;function t(v){"use strict";m.constructor.call(this,v)}t.prototype.$CurateCommentPlaceInfoHeader1=function(){"use strict"};t.prototype.render=function(){"use strict";var v=this.props.isAddingMore?i._("Is another place being recommended?"):i._("Is a place being recommended?");return c("React").createElement(c("Layout.react"),{className:"_2phz _22k8"},c("React").createElement(r,{className:"_22kb"},v))};n=babelHelpers.inherits(u,c("React").Component);o=n&&n.prototype;function u(v){"use strict";o.constructor.call(this,v);this.$CurateCommentPlaceInfo3=function(w){this.setState({isShown:w})}.bind(this);this.$CurateCommentPlaceInfo1=new(c("CurationStateSubscriptionHandler").getSubscriptionListForPostID)(this.props.postID);this.state={isShown:false,curationMode:c("CurationModes").NONE}}u.prototype.componentDidMount=function(){"use strict";this.$CurateCommentPlaceInfo2=this.$CurateCommentPlaceInfo1.add(this.$CurateCommentPlaceInfo3)};u.prototype.componentWillUnmount=function(){"use strict";this.$CurateCommentPlaceInfo2&&this.$CurateCommentPlaceInfo2.remove()};u.prototype.$CurateCommentPlaceInfo4=function(v){"use strict";this.setState({curationMode:v})};u.prototype.render=function(){"use strict";if(!this.state.isShown)return null;var v=void 0;if(this.state.curationMode===c("CurationModes").ADD_PLACE&&this.props.commentID)v=c("React").createElement("div",{className:"_61sb"},c("React").createElement(c("SuggestRecommendationToComment.react"),{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onRefreshPlaces:this.props.onRefreshPlaces,onBlur:this.$CurateCommentPlaceInfo4.bind(this,c("CurationModes").NONE)}));return c("React").createElement("div",{className:"_3-8x _1ge2 _3-e2"},c("React").createElement(t,{isAddingMore:this.props.isAddingMore,removeFunction:this.$CurateCommentPlaceInfo4.bind(this,c("CurationModes").NONE)}),c("React").createElement("div",{className:"_4yjk _2phz"},c("React").createElement(s,{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onAdd:this.$CurateCommentPlaceInfo4.bind(this,c("CurationModes").ADD_PLACE),onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions})),v)};f.exports=u}),null);
__d("MultiPlacePageInfoCard.react",["csx","cx","AddPlaceToMapComponent.react","CurateCommentPlaceInfo.react","Parent","PlaceListEventEmitter","PlaceListInteractiveMapOperation","PlaceListMapEvents","PlaceListMapState","PlaceListMapUpdater","PlacePageInfoAggregation.react","React","ReactDOM","SubscriptionsHandler","areEqual","idx","nullthrows"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=[[c("PlaceListMapState").PENDING],[c("PlaceListMapState").SUGGESTED],[c("PlaceListMapState").REMOVABLE],[null,c("PlaceListMapState").NORMAL]],m={};j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){"use strict";k.constructor.call(this,o);this.$MultiPlacePageInfoCard1=JSON.stringify(o);this.$MultiPlacePageInfoCard2=new(c("SubscriptionsHandler"))();this.state={attachmentPermissions:this.props.attachmentPermissions?Object.assign({},this.props.attachmentPermissions):null,pagesData:(m[this.$MultiPlacePageInfoCard1]||o).pagesData.slice(0)}}n.prototype.componentDidMount=function(){"use strict";if(this.$MultiPlacePageInfoCard3()&&this.props.isLocallyComposed&&this.refs.root)this.refs.root.scrollIntoView();this.$MultiPlacePageInfoCard2.addSubscriptions(c("PlaceListEventEmitter").addListener(c("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,function(o){var p=this.state.attachmentPermissions;if(this.props.pagesData.length===0&&p&&o.commentFBID===p.commentIDForButtonOnEmpty){var q=o.pagesData;this.setState({pagesData:q})}}.bind(this)))};n.prototype.componentWillUpdate=function(o,p){"use strict";if(!c("areEqual")(this.state,p))m[this.$MultiPlacePageInfoCard1]=p};n.prototype.render=function(){"use strict";__p&&__p();var o=this.state.attachmentPermissions,p=l.map(function(u){return this.$MultiPlacePageInfoCard4(u)}.bind(this)).filter(function(u){return u.length>0}),q=void 0,r=void 0,s=true;if(p.length===0){r=o&&o.commentIDForButtonOnEmpty;s=false;q=o&&o.canViewerAdd&&r&&!o.canViewerCurate?c("React").createElement(c("AddPlaceToMapComponent.react"),{commentID:r,isAddingMore:s,onChangeAttachmentPermissions:this.$MultiPlacePageInfoCard5.bind(this),onRefreshPlaces:function(u){return this.setState({pagesData:u})}.bind(this)}):null}else{var t;r=(t=this.state)!=null?(t=t.pagesData)!=null?(t=t[0])!=null?(t=t.mapContext)!=null?t.commentID:t:t:t:t;q=c("React").createElement(c("PlacePageInfoAggregation.react"),{attachmentPermissions:o,onChangeAttachmentPermissions:this.$MultiPlacePageInfoCard5.bind(this),onChangePlaceState:this.$MultiPlacePageInfoCard6.bind(this),onRefreshPlaces:function(u){return this.setState({pagesData:u})}.bind(this),pageSections:p,postID:this.props.postID})}q=o&&o.canViewerAddSuggested&&r&&this.props.postID?c("React").createElement("div",null,q,c("React").createElement(c("CurateCommentPlaceInfo.react"),{commentID:r,postID:this.props.postID,isAddingMore:s,attachmentPermissions:o,onChangeAttachmentPermissions:this.$MultiPlacePageInfoCard5.bind(this),onChangePlaceState:this.$MultiPlacePageInfoCard6.bind(this),onRefreshPlaces:function(u){return this.setState({pagesData:u})}.bind(this)})):q;return q?c("React").createElement("div",{className:"_53jt",ref:"root"},q):null};n.prototype.$MultiPlacePageInfoCard4=function(o){"use strict";return this.state.pagesData.filter(function(p){var q=p.mapContext?p.mapContext.mapState:null;return o.indexOf(q)>=0})};n.prototype.$MultiPlacePageInfoCard5=function(o){"use strict";this.setState({attachmentPermissions:Object.assign({},c("nullthrows")(this.state.attachmentPermissions),o)})};n.prototype.$MultiPlacePageInfoCard6=function(o,p,q){"use strict";__p&&__p();var r=this.state.pagesData,s=[],t=r.map(function(w){var x=w.pageInfo&&w.pageInfo.id,y=w.profileInfo&&w.profileInfo.id,z=w.suggestedRecInfo&&w.suggestedRecInfo.pageInfo&&w.suggestedRecInfo.pageInfo.id,A=x||y||z;if(A!==o||!w.mapContext)return w;var B=Object.assign({},w.mapContext);B.mapState=p;var C=w.pageInfo||w.suggestedRecInfo&&w.suggestedRecInfo.pageInfo;if(C!=null&&(p===c("PlaceListMapState").NORMAL||p===c("PlaceListMapState").REMOVABLE))s.push({data:{location:c("nullthrows")(C.location),icons:c("nullthrows")(C.icons),id:c("nullthrows")(C.id)},operation:c("PlaceListInteractiveMapOperation").ADD});return Object.assign({},w,{mapContext:B})}),u=c("nullthrows")(c("nullthrows")(r[0]).mapContext).commentID;this.setState({pagesData:t.filter(function(w){var x=w.mapContext?w.mapContext.mapState:null;return x!==c("PlaceListMapState").REMOVED})});var v={mapBoundingPoints:q,pins:s};this.$MultiPlacePageInfoCard7(u,v);return this.state.pagesData};n.prototype.$MultiPlacePageInfoCard3=function(){"use strict";var o=c("ReactDOM").findDOMNode(this);if(!o)return false;return c("Parent").bySelector(o,"._23ce")!==null};n.prototype.$MultiPlacePageInfoCard7=function(o,p){"use strict";c("PlaceListMapUpdater").updateMap({ufiNode:c("ReactDOM").findDOMNode(this),commentFBID:o},p)};f.exports=n}),null);