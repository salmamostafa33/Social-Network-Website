if (self.CavalryLogger) { CavalryLogger.start_js(["ZO2w+"]); }

__d("EntstreamLayerPageBody",["cx","Arbiter","DOM","React","ReactDOM","ScrollableArea.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={contentLoaded:false},m}k.prototype.$EntstreamLayerPageBody1=function(){"use strict";c("Arbiter").inform("dom-scroll")};k.prototype.componentWillReceiveProps=function(l){"use strict";if(l.body&&!this.props.body)this.setState({contentLoaded:true})};k.prototype.componentDidUpdate=function(l){"use strict";if(this.props.body&&!l.body)c("DOM").setContent(c("ReactDOM").findDOMNode(this.refs.content),this.props.body)};k.prototype.render=function(){"use strict";var l=null;if(!this.state.contentLoaded)l=c("React").createElement("div",{className:"_46__"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));return c("React").createElement(c("ScrollableArea.react"),{fade:true,onScroll:this.$EntstreamLayerPageBody1,width:725},c("React").createElement("div",{className:"_1zsk"},l,c("React").createElement("div",{ref:"content"})))};f.exports=k}),null);
__d("LayerSlideIn",["cx","CSS","Style"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=530;function j(k){"use strict";this.$LayerSlideIn1=k;this.$LayerSlideIn2=[]}j.prototype.enable=function(){"use strict";this.$LayerSlideIn2=[this.$LayerSlideIn1.subscribe("beforeshow",function(){c("Style").set(this.$LayerSlideIn1.getRoot(),"background-color","rgba(0, 0, 0, 0)");c("Style").set(this.$LayerSlideIn1.getContentRoot(),"top","100%")}.bind(this)),this.$LayerSlideIn1.subscribe("aftershow",function(){c("CSS").addClass(this.$LayerSlideIn1.getContentRoot(),"_1zjq");c("Style").set(this.$LayerSlideIn1.getRoot(),"background-color","");c("Style").set(this.$LayerSlideIn1.getContentRoot(),"top","");setTimeout(c("CSS").removeClass.bind(null,this.$LayerSlideIn1.getContentRoot(),"_1zjq"),i)}.bind(this))]};j.prototype.disable=function(){"use strict";while(this.$LayerSlideIn2.length)this.$LayerSlideIn2.pop().unsubscribe();this.$LayerSlideIn2=[]};f.exports=j}),null);
__d("LayerSlideOut",["csx","cx","CSS","DOM","Style","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=530;function k(l){"use strict";this.$LayerSlideOut1=l;this.$LayerSlideOut4=c("DOM").find(l.getRoot(),"._1zjk")}k.prototype.enable=function(){"use strict";this.$LayerSlideOut3=this.$LayerSlideOut1.subscribe("starthide",function(){c("CSS").addClass(this.$LayerSlideOut4,"_1zjr");c("Style").set(this.$LayerSlideOut1.getRoot(),"background","rgba(0, 0, 0, 0)");c("setTimeoutAcrossTransitions")(this.$LayerSlideOut1.finishHide.bind(this.$LayerSlideOut1),j);return false}.bind(this))};k.prototype.disable=function(){"use strict";this.$LayerSlideOut2&&this.$LayerSlideOut2.unsubscribe();this.$LayerSlideOut3=null};f.exports=k}),null);
__d("EntstreamLayerPage",["csx","cx","BrowserSupport","DOM","JSXDOM","Layer","LayerButtons","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","LayerHideOnEscape","LayerSlideIn","LayerSlideOut","ModalLayer"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("Layer"));k=j&&j.prototype;function l(m,n){"use strict";k.constructor.call(this,m,n);if(m.permalink)this._permalink=m.permalink}l.prototype._buildWrapper=function(m,n){"use strict";return c("JSXDOM").div({className:"_1zjj"},n)};l.prototype._getDefaultBehaviors=function(){"use strict";var m=c("BrowserSupport").hasCSSAnimations()?c("LayerSlideIn"):c("LayerFadeOnShow"),n=c("BrowserSupport").hasCSSAnimations()?c("LayerSlideOut"):c("LayerFadeOnHide");return k._getDefaultBehaviors.call(this).concat([m,n,c("ModalLayer"),c("LayerButtons"),c("LayerDestroyOnHide"),c("LayerHideOnBlur"),c("LayerHideOnEscape")])};l.prototype.getContentRoot=function(){"use strict";if(!this._content)this._content=c("DOM").find(this.getRoot(),"div._1zjk");return this._content};f.exports=l}),null);
__d("LayerPageNavigationMixin",["Animation","CSS","ReactDOM","ScrollableArea","Style","UserAgent_DEPRECATED","queryThenMutateDOM","throttle"],(function a(b,c,d,e,f,g){__p&&__p();var h=300,i=150,j;if(c("UserAgent_DEPRECATED").ie()<=8)j=function j(l,m,n,o){c("Style").apply(l,{opacity:m,marginLeft:n+"px"});o&&o()};else j=function j(l,m,n,o){new(c("Animation"))(l).to("opacity",m).to("margin-left",n+"px").duration(h).ease(c("Animation").ease.both).ondone(o).go()};var k={_fadeOut:function l(m,n,o){c("Style").apply(m,{position:"absolute",top:"0",width:m.offsetWidth+"px"});var p=n==="left"?-i:i;j(m,0,p,function(){c("CSS").hide(m);c("Style").apply(m,{position:"",top:"",width:""});o&&o()})},_fadeIn:function l(m,n,o){c("CSS").show(m);c("Style").apply(m,{marginLeft:(n==="left"?-i:i)+"px",opacity:"0"});j(m,1,0,o)},_updateMainNode:function l(m){__p&&__p();if(this._mainNode===m||!this.refs.shadow)return;this._mainNode=m;if(this._scrollSubscription){this._scrollSubscription.unsubscribe();this._scrollSubscription=null}this._scrollableArea=c("ScrollableArea").getInstance(m);if(!this._scrollableArea){this.setState({shadow:false});return}var n,o=c("throttle")(c("queryThenMutateDOM").bind(null,function(){n=this._scrollableArea.getScrollTop()>0}.bind(this),function(){if(n!==this.state.shadow)this.setState({shadow:n})}.bind(this)));o();this._scrollSubscription=this._scrollableArea.subscribe("scroll",o)},_toggleBack:function l(m){__p&&__p();var n=c("ReactDOM").findDOMNode(this.refs.back);if(m){c("CSS").show(n);new(c("Animation"))(n).from("opacity",0).to("opacity",1).ease(c("Animation").ease.both).duration(h).go()}else{c("Style").set(n,"position","absolute");new(c("Animation"))(n).from("opacity",1).to("opacity",0).duration(h).ease(c("Animation").ease.both).ondone(function(){c("CSS").hide(n);c("Style").set(n,"position","")}).go()}},componentDidUpdate:function l(m){__p&&__p();var n=this.state.stack,o=this.props.stack,p=m.stack;if(p.length===1&&o.length>1)this._toggleBack(true);else if(p.length>1&&o.length===1)this._toggleBack(false);var q=c("ReactDOM").findDOMNode(this.refs.headers).childNodes,r=c("ReactDOM").findDOMNode(this.refs.bodies).childNodes,s=r.length;if(o.length>p.length){this._fadeOut(q[s-2],"left");this._fadeOut(r[s-2],"left");this._fadeIn(q[s-1],"right");this._fadeIn(r[s-1],"right");this._updateMainNode(r[s-1])}else if(o.length<n.length){var t=4,u=function(){if(--t===0){this._updateStack(o);this._updateMainNode(r[s-2]);this.props.onPopComplete&&this.props.onPopComplete()}}.bind(this);this._fadeOut(q[s-1],"right",u);this._fadeOut(r[s-1],"right",u);this._fadeIn(q[s-2],"left",u);this._fadeIn(r[s-2],"left",u)}else if(n.length===1)this._updateMainNode(c("ReactDOM").findDOMNode(this.refs.bodies).childNodes[0])},componentWillReceiveProps:function l(m){if(m.stack.length>this.state.stack.length)this._updateStack(m.stack)},_updateStack:function l(m){this.setState({stack:m.slice()})},getInitialState:function l(){return{shadow:false,stack:this.props.stack}}};f.exports=k}),null);
__d("EntstreamLayerPageContainer",["cx","LayerPageNavigationMixin","React","XUICloseButton.react"],(function a(b,c,d,e,f,g,h){var i=c("React").createClass({displayName:"EntstreamLayerPageContainer",mixins:[c("LayerPageNavigationMixin")],render:function j(){var k=this.state.stack,l=[],m=[];k.forEach(function(o){l.push(o.getHeader());m.push(o.getBody())});var n="_1zjk"+(this.state.shadow?" _57bd":"");return c("React").createElement("div",{className:n},c("React").createElement("div",{className:"_1zjl"},c("React").createElement("a",{className:"_59kl hidden_elem",onClick:this.props.onBack,ref:"back",role:"button",tabIndex:"0"},c("React").createElement("i",{className:"_59km"})),c("React").createElement(c("XUICloseButton.react"),{className:"_1zjo layerCancel"}),c("React").createElement("div",{className:"_59kn",ref:"headers"},l)),c("React").createElement("i",{className:"_1zjn",ref:"shadow"}),c("React").createElement("div",{className:"_1zjm",ref:"bodies"},m))}});f.exports=i}),null);
__d("LayerPageNavigationController",["Arbiter","DOM","PageTransitions","React","ReactDOM","URI","UserAgent_DEPRECATED"],(function a(b,c,d,e,f,g){__p&&__p();function h(k){return k.length>=1&&k[k.length-1]}var i={constructLayer:function k(){},getLayerPageContainerClass:function k(){},setupLink:function k(f,l){this._linkHandlers=this._linkHandlers||{};var m=new(c("URI"))(l.href).getUnqualifiedURI().toString();this._linkHandlers[m]=f.display.bind(f,l.type,l.id,l.name,m,l.source,l.viewer_id);this._registerHandler()},_registerHandler:function k(){if(!this._registeredHandler){c("PageTransitions").registerHandler(this._handleTransition.bind(this),6);this._registeredHandler=true}},_onBack:function k(){__p&&__p();if(this._popping)return;this._popping=true;var l=this._stack.pop();this._forwardStack.push(l);var m=-1;while(this._stack.length&&h(this._stack).isSnowlift()){l=this._stack.pop();this._forwardStack.push(l);c("Arbiter").inform("LayerPageNavigation/pop");m--}this._rerender();this._poppingTransition=isNaN(c("UserAgent_DEPRECATED").opera());window.history.go(m)},_rerender:function k(){var l=this.getLayerPageContainerClass();c("ReactDOM").render(c("React").createElement(l,{onBack:this._onBack.bind(this),onPopComplete:function(){this._popping=false}.bind(this),stack:this._stack.slice()}),this._layerRoot)},_isSnowliftURI:function k(l){return l.getUnqualifiedURI().setQueryData({}).toString()==="/photo.php"||Object.prototype.hasOwnProperty.call(l.getQueryData(),"theater")},_handleTransition:function k(l){__p&&__p();if(this._poppingTransition){this._poppingTransition=false;return this._transitionHandled()}if(this._forceTransitionComplete){this._forceTransitionComplete=false;return this._transitionHandled()}var m=l.getUnqualifiedURI().removeQueryData(["closeTheater"]).toString();this._stack=this._stack||[];this._forwardStack=this._forwardStack||[];var n=this._stack.length,o=h(this._stack);if(o&&m===o.getPermalink()){this._forwardStack=[];return this._isSnowliftURI(l)?this._transitionHandledBySnowlift():this._transitionHandled()}var p=n>=2&&this._stack[n-2].getPermalink();if(p&&m===p){this._forwardStack.push(this._stack.pop());if(this._isSnowliftURI(l))return this._transitionHandledBySnowlift();else{c("Arbiter").inform("LayerPageNavigation/pop");this._rerender();return this._transitionHandled()}}if(this._isSnowliftURI(l)){var q=new j(this,{permalink:l,isSnowlift:true},{},{});this._stack.push(q);return this._transitionHandledBySnowlift()}var r=h(this._forwardStack);if(r&&m===r.getPermalink()){this._handlingForwardNavigation=true;this._forwardStack.pop().getShowFunction()();return this._transitionHandled()}if(n===1&&m===this._initialURI){this._forwardStack.push(this._stack.pop());c("Arbiter").inform("LayerPageNavigation/pop");this._layer.hide();return this._transitionHandled()}if(this._linkHandlers&&this._linkHandlers[m]){this._linkHandlers[m]();return this._transitionHandled()}this._layer&&this._layer.hide();return this._transitionNotHandled()},_transitionHandled:function k(){if(this._isInSnowlift){this._isInSnowlift=false;this._registeredHandler=false;this._registerHandler();return false}this._isInSnowlift=false;c("PageTransitions").transitionComplete();return true},_transitionNotHandled:function k(){this._linkHandlers={};this._stack=[];this._forwardStack=[];this._registeredHandler=false;this._isInSnowlift=false;return false},_transitionHandledBySnowlift:function k(){this._isInSnowlift=true;this._registeredHandler=false;this._stack=[];this._registerHandler();return false},show:function k(l,m,n){__p&&__p();this._registerHandler();this._stack=this._stack||[];this._forwardStack=this._forwardStack||[];var o=new j(this,l,m,n);this._stack.push(o);c("Arbiter").inform("LayerPageNavigation/push");if(!this._layer){this._layerRoot=c("DOM").create("div");this._rerender();this._layer=this.constructLayer(l,this._layerRoot).show();this._layer.subscribe("hide",function(){var p=h(this._stack),q=c("URI").getNextURI().getUnqualifiedURI().removeQueryData(["closeTheater"]).toString();if(p&&p.getPermalink()===q){this._forceTransitionComplete=true;c("PageTransitions").go(this._initialURI)}c("Arbiter").inform("LayerPageNavigation/hide");this._layer=null;this._stack=[]}.bind(this));this._initialURI=c("PageTransitions").getMostRecentURI().getUnqualifiedURI().toString()}else this._rerender();if(this._handlingForwardNavigation)this._handlingForwardNavigation=false;return o},getCurrentLayer:function k(){return this._layer}};function j(k,l,m,n){this._navigationInstance=k;this._config=l;this._header=m;this._body=n}Object.assign(j.prototype,{getLayer:function k(){return this._navigationInstance._layer},getHeader:function k(){return this._header},getBody:function k(){return this._body},getPermalink:function k(){if(this._hasSetPermalink)return this._config.permalink;this._hasSetPermalink=true;this._config.permalink=new(c("URI"))(this._config.permalink).getUnqualifiedURI().removeQueryData(["closeTheater"]).toString();return this._config.permalink},getShowFunction:function k(){return this._config.show},update:function k(l,m){if(!this._navigationInstance._stack.includes(this))return;this._header=l||this._header;this._body=m||this._body;this._navigationInstance._rerender()},isSnowlift:function k(){return this._config.isSnowlift===true}});f.exports=i}),null);
__d("EntstreamLayerPageController",["EntstreamLayerPage","EntstreamLayerPageContainer","LayerPageNavigationController"],(function a(b,c,d,e,f,g){var h={};Object.assign(h,c("LayerPageNavigationController"),{constructLayer:function i(j,k){return new(c("EntstreamLayerPage"))(j,k)},getLayerPageContainerClass:function i(){return c("EntstreamLayerPageContainer")}});f.exports=h}),null);
__d("EntstreamLayerPageHeader",["DOM","React","ReactDOM"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.$EntstreamLayerPageHeader1=function(){"use strict";if(this.props.domHeader)c("DOM").setContent(c("ReactDOM").findDOMNode(this.refs.domHeader),this.props.domHeader)};j.prototype.componentDidMount=function(){"use strict";this.$EntstreamLayerPageHeader1()};j.prototype.componentDidUpdate=function(){"use strict";this.$EntstreamLayerPageHeader1()};j.prototype.render=function(){"use strict";return c("React").createElement("div",{ref:"header"},this.props.reactHeader,c("React").createElement("div",{ref:"domHeader"}))};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("BrowseModalResults",["cx","Arbiter","DOM","DOMContainer.react","EntstreamLayerPageBody","EntstreamLayerPageController","EntstreamLayerPageHeader","Event","React","SubscriptionsHandler","UIPagelet","sprintf"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this.options=j;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(c("Event").listen(this.options.link,"click",this.onLinkClick.bind(this)));this.options.link.setAttribute("href",this.options.see_more_uri)}i.prototype.onLinkClick=function(event){"use strict";__p&&__p();if(event.metaKey||event.shiftKey||event.button===1)return;event.preventDefault();var j=c("sprintf")('{"view":"modal", "module":"%s"}',this.options.module_type),k=c("React").createElement("div",{className:"_h5a"},c("React").createElement(c("DOMContainer.react"),null,this.options.module_title)),l=c("DOM").create("div"),m=c("DOM").create("div",{className:"_u9e","data-bt":j}),n=c("EntstreamLayerPageController").show({permalink:"#"},c("React").createElement(c("EntstreamLayerPageHeader"),{reactHeader:k}),c("React").createElement(c("EntstreamLayerPageBody"),null));n.getLayer().subscribeOnce("hide",function(){c("Arbiter").inform("BrowseScrollingPager/destroyIfNotLast");c("Arbiter").inform("LiveConversationController/stopFetchingInModal");if(this.pageletLoadHandler)this.pageletLoadHandler.cancel()}.bind(this));this.pageletLoadHandler=c("UIPagelet").loadFromEndpoint(this.options.pagelet,m,this.options.params,{displayCallback:function o(p){c("DOM").setContent(l,m);n.update(null,c("React").createElement(c("EntstreamLayerPageBody"),{body:l}));p()}})};i.init=function(j){return new i(j)};f.exports=i}),null);
__d("Autosize",["cx","CSS","DOM","Style"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=["fontFamily","fontStyle","fontVariant","fontWeight","letterSpacing","textDecoration","textIndent","textTransform","whiteSpace","wordSpacing","wordWrap"],j=/^[0-9]+$/;function k(p){var q=p.cloneNode(true);c("CSS").addClass(q,"_4g");var r=p.clientWidth-c("Style").getFloat(p,"paddingLeft")-c("Style").getFloat(p,"paddingRight");c("Style").set(q,"width",r+"px");var s=p.clientHeight-c("Style").getFloat(p,"paddingTop")-c("Style").getFloat(p,"paddingBottom");c("Style").set(q,"height",s+"px");c("DOM").insertAfter(p,q);return q}function l(p,q,r,s,t){__p&&__p();var u=p.style.fontSize,v=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var w=p.style.width;c("Style").set(p,"width","auto")}var x=0,y=t.length-1;while(x<y){var z=Math.ceil((x+y)/2);c("Style").set(p,"font-size",t[z]+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q)y=z-1;else x=z}p.style.fontSize=u;p.style.height=v;if(q!==null)p.style.width=w;return t[x]+s}function m(p,q,r,s,t,u){__p&&__p();var v=p.style.fontSize,w=p.style.height;c("Style").set(p,"height","auto");if(q!==null){var x=p.style.width;c("Style").set(p,"width","auto")}c("Style").set(p,"font-size",u+s);if((r===null||p.scrollHeight<=r)&&(q===null||p.scrollWidth<=q)){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return u+s}c("Style").set(p,"font-size",t+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q){p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s}while(t+1<u){var y=Math.ceil((t+u)/2);c("Style").set(p,"font-size",y+s);if(r!==null&&p.scrollHeight>r||q!==null&&p.scrollWidth>q)u=y;else t=y}p.style.fontSize=v;p.style.height=w;if(q!==null)p.style.width=x;return t+s}function n(p,q){__p&&__p();this._wrap=p;this._attr=q;if(this._attr.sizes){var r=this._attr.sizes;for(var s=1,t=r.length;s<t;s++){if(r[s-1]<=r[s])continue;r.sort(function(v,w){return v-w});break}}else if(q.min>q.max){var u=q.min;q.min=q.max;q.max=u}this.fit()}n.prototype.fit=function(p,q){__p&&__p();var r=this._wrap;if(!r.clientWidth){o.push(this);return}var s=k(r);if(typeof p==="undefined")p=this._attr.width;if(j.test(p))s.style.width=p+"px";else if(p!==null&&p!=="auto")s.style.width=p;if(typeof q==="undefined")q=this._attr.height;if(j.test(q))s.style.height=q+"px";else if(q!==null&&q!=="auto")s.style.height=q;var t=null;if(!this._attr.wrap)t=s.clientWidth;var u=null;if(this._attr.wrap||q!==null)u=s.clientHeight;var v;if(this._attr.sizes)v=l(s,t,u,"px",this._attr.sizes);else v=m(s,t,u,"px",this._attr.min,this._attr.max);c("DOM").remove(s);c("Style").set(r,"font-size",v);c("CSS").removeClass(r,"invisible_elem")};var o=[];n.onNodeInserted=function(){var p=o;o=[];p.forEach(function(q){q.fit()})};f.exports=n}),null);
__d("EgoActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMP:1,CLICK:2,CONVERSION:4,SUPPRESS:8,NEXT:16,ERROR:32,XOUT:24,NONE:0})}),null);
__d("EgoPageServiceConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FAN:"fan",UNFAN:"unfan",PAGE_VIEW:"page_view",FRIEND_VIEW:"friend_view",SEE_ALL:"see_all",ADD_INTEREST:"add_interest",CONTEXT_ITEM:"tap_context_item",BOOST_POST:"tap_boost_post",WATCH_AS_PAGE:"watch_as_page",UNWATCH_AS_PAGE:"unwatch_as_page",SHOP_VIEW:"shop_view",MESSAGE:"message",FOLLOW:"follow",UNFOLLOW:"unfollow",SUBSCRIBE:"subscribe"})}),null);
__d("PagesSimilarPagesOverlay",["cx","fbt","DOM","EntstreamLayerPageBody","EntstreamLayerPageController","EntstreamLayerPageHeader","React","UIPagelet","XUIText.react"],(function a(b,c,d,e,f,g,h,i){var j={display:function k(l,m,n,o,p,q){var r=c("React").createElement(c("XUIText.react"),{size:"body2",weight:"bold"},i._("Pages Similar to {name}",[i.param("name",n)])),s=c("EntstreamLayerPageController").show({permalink:o,show:this.display.bind(this,l,m,n,o,p,q)},c("React").createElement(c("EntstreamLayerPageHeader"),{reactHeader:r}),c("React").createElement(c("EntstreamLayerPageBody"),null)),t=c("DOM").create("div",{className:"_5qvx clearfix"});c("UIPagelet").loadFromEndpoint("PagesBrowserTiledLayoutPagelet",t,{category:"similar",showhero:false,similar:m,ref:"similar_pages_overlay"},{displayCallback:function u(v){s.update(null,c("React").createElement(c("EntstreamLayerPageBody"),{body:t}));v()}})}};f.exports=j}),null);
__d("PagesSimilarPagesOverlayLink",["CurrentUser","EntstreamLayerPageController","PagesSimilarPagesOverlay","XPagesBrowserController"],(function a(b,c,d,e,f,g){f.exports={getURI:function h(i,j){var k=c("XPagesBrowserController").getURIBuilder().setInt("similar",i).getURI();c("EntstreamLayerPageController").setupLink(c("PagesSimilarPagesOverlay"),{href:k,type:null,id:i,name:j,source:null,viewer_id:c("CurrentUser").getID()});return k}}}),null);
__d("XPagesSimilarPagesAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/pages/similar/",{id:{type:"Int",required:true},limit:{type:"Int",defaultValue:10}})}),null);
__d("XPubcontentInteractionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/suggestions/interaction_logging/",{})}),null);
__d("PagesBrowserItem",["csx","cx","fbt","Arbiter","AsyncRequest","ChatOpenTabEventLogger","CSS","DOM","DOMQuery","EgoActionType","EgoPageServiceConstants","Event","Facepile.react","FantaTabActions","MercuryIDs","PageLikeConstants","PagesBrowserConfig","PagesMessagingChatTabRef","PagesSimilarPagesOverlayLink","React","ReactDOM","Run","XPagesSimilarPagesAsyncController","XPubcontentInteractionLoggingController","XUIOverlayButton.react","goURI","removeFromArray","tidyEvent"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=33,l=[];c("Arbiter").subscribe([c("PageLikeConstants").LIKED,c("PageLikeConstants").UNLIKED],function(n,o){l.forEach(function(p){if(p.getPageID()==o.profile_id)if(n===c("PageLikeConstants").LIKED)p.like();else p.unlike()})});function m(n,o){"use strict";this.$PagesBrowserItem1=n;this.$PagesBrowserItem2=o;this.init();l.push(this);c("Run").onLeave(function(){c("removeFromArray")(l,this)}.bind(this))}m.prototype.init=function(){"use strict";__p&&__p();var n=[];if(this.$PagesBrowserItem2.removeButton)n.push(c("Event").listen(this.$PagesBrowserItem2.removeButton,"click",this.remove.bind(this)));if(this.$PagesBrowserItem2.egoLogData){n.push(c("Event").listen(this.$PagesBrowserItem2.page_profile_image,"click",this.logEgoInteraction.bind(this,c("EgoPageServiceConstants").PAGE_VIEW,c("EgoActionType").CLICK)),c("Event").listen(this.$PagesBrowserItem2.page_profile_name,"click",this.logEgoInteraction.bind(this,c("EgoPageServiceConstants").PAGE_VIEW,c("EgoActionType").CLICK)));if(this.$PagesBrowserItem2.actionButton&&this.$PagesBrowserItem2.actionButtonType==="message")n.push(c("Event").listen(this.$PagesBrowserItem2.actionButton,"click",this.handleMessageClick.bind(this)))}if(n.length>0)c("tidyEvent")(n)};m.prototype.like=function(){__p&&__p();var n,o=this;"use strict";if(!this.$PagesBrowserItem3){var p=c("DOMQuery").scry(this.$PagesBrowserItem1,"._5l2b")[0];if(p)(function(){__p&&__p();o.$PagesBrowserItem3=c("DOM").create("div",{className:"_5qvy"});var q=c("PagesSimilarPagesOverlayLink").getURI(o.$PagesBrowserItem2.pageID,o.$PagesBrowserItem2.pageName),r=c("React").createElement(c("XUIOverlayButton.react"),{className:"_5qvz",href:q,label:j._("See Similar Pages")});c("ReactDOM").render(r,o.$PagesBrowserItem3);c("DOM").appendContent(p,o.$PagesBrowserItem3);if(c("PagesBrowserConfig").similar_overlay_group==="thumbnails"){c("CSS").addClass(o.$PagesBrowserItem3,"_5rng");var s=Math.floor(o.$PagesBrowserItem3.offsetWidth/k),t=c("XPagesSimilarPagesAsyncController").getURIBuilder().setInt("id",o.$PagesBrowserItem2.pageID).setInt("limit",s).getURI();new(c("AsyncRequest"))(t).setHandler(function(u){__p&&__p();var v=u.payload,w=v&&v.similar;if(w){var x=[];for(var y in w){var z=w[y];x.push({name:z.name,URL:q,profilePicURI:z.thumbnail_uri})}var A=c("React").createElement(c("Facepile.react"),{profiles:x,size:"medium"}),B=c("DOM").create("div",{className:"_5rnh"});c("ReactDOM").render(A,B);c("DOM").prependContent(this.$PagesBrowserItem3,B)}}.bind(o)).send()}else if(c("PagesBrowserConfig").similar_overlay_group==="aggressive")if(window.location.href!=q)c("goURI")(q)})();this.logEgoInteraction(c("EgoPageServiceConstants").FAN,c("EgoActionType").CLICK)}if(this.$PagesBrowserItem3){c("CSS").addClass(this.$PagesBrowserItem1,"_5qv-");c("CSS").show(this.$PagesBrowserItem3);if(this.$PagesBrowserItem2.removeButton)c("CSS").hide(this.$PagesBrowserItem2.removeButton)}};m.prototype.unlike=function(){"use strict";if(this.$PagesBrowserItem3){c("CSS").removeClass(this.$PagesBrowserItem1,"_5qv-");c("CSS").hide(this.$PagesBrowserItem3);if(this.$PagesBrowserItem2.removeButton)c("CSS").show(this.$PagesBrowserItem2.removeButton)}};m.prototype.remove=function(event){"use strict";__p&&__p();var n=this.$PagesBrowserItem2.egoLogData;if(n){var o=this.$PagesBrowserItem2.actionButtonType==="message"?c("EgoPageServiceConstants").MESSAGE:c("EgoPageServiceConstants").FAN;this.logEgoInteraction(o,c("EgoActionType").XOUT)}else new(c("AsyncRequest"))("/ajax/pages/browser/page_recommend_hide.php").setData({page_id:this.$PagesBrowserItem2.pageID,ref:"pages_browser_rd"}).send();c("CSS").hide(this.$PagesBrowserItem2.removeButton);this.$PagesBrowserItem4=c("DOM").create("div");var p=c("React").createElement("div",{className:"_5l76"},j._("The page has been removed from your suggestions."));c("ReactDOM").render(p,this.$PagesBrowserItem4);c("DOM").appendContent(this.$PagesBrowserItem1,this.$PagesBrowserItem4);event.prevent()};m.prototype.logEgoInteraction=function(n,o){"use strict";var p=this.$PagesBrowserItem2.egoLogData;if(!p)return;var q=c("XPubcontentInteractionLoggingController").getURIBuilder(),r={q:p,action:n,action_type:o};new(c("AsyncRequest"))().setMethod("POST").setURI(q.getURI()).setData(r).send()};m.prototype.handleMessageClick=function(){"use strict";var n=c("MercuryIDs").getThreadIDFromUserID(this.getPageID().toString()),o=c("PagesMessagingChatTabRef").PYMM_PAGES_BROWSER;c("FantaTabActions").openTab(n,[o]);c("ChatOpenTabEventLogger").logClickOpen(o,n);this.logEgoInteraction(c("EgoPageServiceConstants").MESSAGE,c("EgoActionType").CLICK)};m.prototype.getPageID=function(){"use strict";return this.$PagesBrowserItem2.pageID};f.exports=m}),null);